
<!DOCTYPE html>
<html>
 <head>
    <title>Friday Facts #67 - Happy new year | Factorio</title>
    <link href="/static/img/favicon.ico" rel="icon" type="image/x-icon"/>
    <link href="/static/img/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
    <link href="/static/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="/static/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"/>
    <link href="/static/css/factorio.css" rel="stylesheet" type="text/css"/>
    <link href="/static/lightbox/css/lightbox.css" rel="stylesheet" type="text/css"/>
    <link href="/blog/rss" rel="alternate" title="Recent Blog Posts" type="application/atom+xml">
    <meta name="viewport" content="width=device-width">
    
    
 </head>
 <body style="background: rgb(22, 22, 22) url(/static/img/stressed_linen_texture.png) repeat 0 0;'">
  <div class="container header" style="margin-top: 30px;">

    <!-- top row -->
   <div class="row" style="margin-bottom: 30px;">
     <div class="span4">
       <a href="/"><img src="/static/img/factorio-logo.png" style="margin-top: 10px;"/></a>
     </div>
    <div class="span8 span8-navbar" style="margin-top: 10px;">
     <div class="user-controls">
      
           <a href="/login">log in</a>
           <a href="/signup">sign up</a>
      
     </div>

     

      

     <div class="navbar">
      <ul class="nav">
        
          
            <li >

            
              <a href=/
                 
              > Home </a>
            

            </li>
        
          
            <li >

            
              <a href=/store
                  style="color: #ff7200;" 
              > Merch </a>
            

            </li>
        
          
            <li  class="custom-dropdown" >

            

              <a class="custom-dropdown-toggle"
                data-toggle="dropdown"
                href="/game-overview"
                
                role="button">
                Game
              </a>

              <ul class="custom-dropdown-menu" role="menu">
                
                  <li role="presentation">
                    <a href=/starter-page>
                      Starter Page
                    </a>
                  </li>
                
                  <li role="presentation">
                    <a href=/screenshots>
                      Screenshots
                    </a>
                  </li>
                
                  <li role="presentation">
                    <a href=/videos>
                      Videos
                    </a>
                  </li>
                
                  <li role="presentation">
                    <a href=/content>
                      Content
                    </a>
                  </li>
                
                  <li role="presentation">
                    <a href=/modding>
                      Modding
                    </a>
                  </li>
                
                  <li role="presentation">
                    <a href=/team>
                      Team
                    </a>
                  </li>
                
              </ul>

            

            </li>
        
          
            <li  class="custom-dropdown" >

            

              <a class="custom-dropdown-toggle"
                data-toggle="dropdown"
                href="/support-overview"
                
                role="button">
                Support
              </a>

              <ul class="custom-dropdown-menu" role="menu">
                
                  <li role="presentation">
                    <a href=/help>
                      Help
                    </a>
                  </li>
                
                  <li role="presentation">
                    <a href=/faq>
                      FAQ
                    </a>
                  </li>
                
                  <li role="presentation">
                    <a href=/press-and-youtube>
                      Press and Youtube
                    </a>
                  </li>
                
                  <li role="presentation">
                    <a href=/community>
                      Community
                    </a>
                  </li>
                
                  <li role="presentation">
                    <a href=/partners>
                      Partners
                    </a>
                  </li>
                
                  <li role="presentation">
                    <a href=/credits>
                      Credits
                    </a>
                  </li>
                
              </ul>

            

            </li>
        
          
            <li >

            
              <a href=https://forums.factorio.com/
                 
              > Forums </a>
            

            </li>
        
          
            <li >

            
              <a href=/contact
                 
              > Contact </a>
            

            </li>
        

      </ul>
     </div>
     </div>
    </div>
   </div>
  <div class="container">
    <noscript>
      <div class="alert alert-block alert-error" style="font-weight: bold; ">
        Javascript is required for proper functioning of these web pages.
      </div>
    </noscript>

    
        
    

    
        
    

    

    

<div class="row">
  <div class="span12 blog-post">
    <h2 style="margin-top: 20px; margin-bottom:5px;">
      Friday Facts #67 - Happy new year
    </h2>

    <div style="font-size: 11px;">Posted by kovarex on 2015-01-02, <a href="/blog/">all posts</a></div>

    <p>
    <p>
I have to admit that the Factorio development is slowed down these days, but it is not stopped because it just can't stop. Or is it because we can't stop? I guess that we have come too far to give up who we are.
</p>

<h4>0.11.8 is less broken than 0.11.7 but still not recommandable</h4>
<p>
There is the the parallel saving/loading of the map in 0.11.7+. The dangerous thing about it is, that it is the first time when we save the game in one thread and render it in the other. It almost works in 0.11.8 but there are still some corner cases where it can corrupt the save or crash the game. Most of the trouble in 0.11.8 is based on the fact, that we use the same flag for entities already saved and for entities already contained in the result of area search. We just thought it will never be used at the same time and it is exactly what is happening now. This is a good lesson for us, that the the view of the game should really never ever change anything in the game state, not even temporarily.<br/>
The 0.11.9 will be released on monday and I hope to have all these kind of problems covered by then.
</p>

<h4>The plans for 0.12 (Part III)</h4>
<p>
We would like to do something like <a href="https://forums.factorio.com/forum/viewtopic.php?f=14&t=4521">the floors mod</a>. It shouldn't be so hard to do, and it adds a lot to the variability and personification of the factories. In the start, the floors will have mainly aesthetic effect, and they will affect the running/driving speed. Especially things like pathways through the forest, will be both nice and practical. We might relate some other mechanics to it, but we need to discuss it more, maybe you can give us your ideas in the comments.
</p>

<h4>The update time reduction</h4>
<p>
We had a <a href="https://forums.factorio.com/forum/viewtopic.php?f=30&t=7381">bug report</a> claiming that the game is broken, as the performance is very low. I inspected the savegame just to find out, it is one of the biggest factories I have seen, so It quite makes sense that it runs slowly. But I couldn't stop myself from finishing one of the key optimisations we had planned to make it run faster. The problem with inserters is, that they are the most cpu intensive piece of the factory (not anymore in the next update).<br/>
The problem can be explained on this situation:<br/>
<img src="https://cdn.factorio.com/assets/img/blog/fff-67-inserter-setup.jpg"/><br/>
These inserters that are putting stuff from the transport belt to the chest are doing nothing, as the chests are full. But in the game logic, they are doing a lot:
<ul>
<li>Get me the list of all the items on the tile in front of me</li>
<li>For every item, check whether I can put it into the chest</li>
<li>For every check, go through all the stacks of the chest and check that it really can't be put there.</li>
</ul>
Imagine that thousands of inserters are doing this boring job 60 times per second. This is obviously far from optimal.
The next picture demonstrates the change I prepared for the 0.11.9<br/>
(The red circles are the debug view indicating the deactivated entities.)
<img src="https://cdn.factorio.com/assets/img/blog/fff-67-inserter-setup-deactivated.jpg"/><br/>
From now on, the inserter tries to do all the logic as before, but once it finds out that there is nothing to do, it will go to sleep. It will also tell the chest and the transport belt to wake it up when something is moved away from the chest, or new items come on the belt, but until then, the inserter is deactivated so it is not using any cpu. You can notice that also some of the belts have red circles on them. They are deactivated as well, because all of the items on them can't move as they are blocked. Once the item that is blocking their front items will be moved again, they will get notified and activated again.<br/>
This system of deactivation of entities is very effective as most of the entities are just waiting for something. Empty station waiting for another train to arrive. Fast inserter waiting 30 seconds for the assembling machine to craft another complicated item etc. etc. In the mentioned save 6/7 of inserters are deactivated now, so the overall updates per second is almost doubled. The next thing we will have to take a look at are the transport belts, as they are the most CPU drainers now, but it will have to wait until 0.12.
</p>

<p>
The fascinating aesthetics of typical PM inspired us to change the graphics direction entirely.
<img src="https://cdn.factorio.com/assets/img/blog/fff-67-happy-new-year.gif"/>
</p>

<p> The regular comment thread <a href="https://forums.factorio.com/forum/viewtopic.php?t=7758">at our forums</a> is ready.
 
    </p>



    <div class="footer">

      <div class="footer-copyright">
          Copyright © 2015 - 2018 Wube Software - all rights reserved.
        </div>
        <div class="footer-menu">

          

          <a href="/terms-of-service" style="font-size: 11px;"> Terms of Service </a>
          <span style="font-size: 11px;"> | </span>
          

          <a href="/privacy-policy" style="font-size: 11px;"> Privacy </a>
          <span style="font-size: 11px;"> | </span>
          

          <a href="/imprint" style="font-size: 11px;"> Imprint </a>
          <span style="font-size: 11px;"> | </span>
          

          <a href="/presskit" style="font-size: 11px;"> Presskit </a>
          <span style="font-size: 11px;"> | </span>
          

          <a href="/faq" style="font-size: 11px;"> FAQ </a>
          <span style="font-size: 11px;"> | </span>
          

          <a href="/blog/rss" style="font-size: 11px;"> RSS </a>
          <span style="font-size: 11px;"> | </span>
          

          <a href="/jobs" style="font-size: 11px;">
            Jobs
          </a>
      </div>
    </div>
  </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
  
  <script src="/static/js/raphael-min.js" type="text/javascript"></script>
  <script src="/static/js/factorio.min.js" type="text/javascript"></script>
  <script src="/static/lightbox/js/lightbox.min.js" type="text/javascript"></script>
  <script type="text/javascript">
   var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-115167276-1']);
        _gaq.push(['_trackPageview']);
        (function()
        {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
  </script>
 </body>
</html>